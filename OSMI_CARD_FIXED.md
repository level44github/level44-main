# OSMI Card Integration - –ò–°–ü–†–ê–í–õ–ï–ù–û ‚úÖ

## ‚ö†Ô∏è –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –±—ã–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–æ–≥–ª–∞—Å–Ω–æ **—Ä–µ–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ OSMI Card API**.

### –ü—Ä–æ–±–ª–µ–º–∞
–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ API endpoints:
- ‚ùå `/cards/register` 
- ‚ùå `/cards/find`
- ‚ùå `/cards/{id}/balance`
- ‚ùå `/cards/{id}/bonuses/add`

### –†–µ—à–µ–Ω–∏–µ
–û–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ endpoints –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
- ‚úÖ `POST /v2t/passes` - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã
- ‚úÖ `GET /v2t/passes` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–∞—Ä—Ç
- ‚úÖ `GET /v2t/passes/{id}` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã –ø–æ ID
- ‚úÖ `PUT /v2t/passes/{id}` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã
- ‚úÖ `DELETE /v2t/passes/{id}` - —É–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã
- ‚úÖ `POST /v2t/passes/{id}/push` - –æ—Ç–ø—Ä–∞–≤–∫–∞ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ `GET /v2t/templates` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤

## üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `/local/php_interface/lib/Level44/OsmiCard/Api.php`
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω URL API –Ω–∞ `https://api.osmicards.com/v2t`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ `$templateId` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä)
- ‚úÖ –ú–µ—Ç–æ–¥ `registerCard()` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `POST /passes`
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
  ```php
  [
    'template_id' => 'ID —à–∞–±–ª–æ–Ω–∞',
    'serial_number' => 'ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', 
    'barcode' => [...],
    'fields' => [...]
  ]
  ```
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã `getCardByPhone()`, `getCardBalance()`, `addBonuses()`, `deductBonuses()`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
  - `getPass($passId)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã –ø–æ ID
  - `getPasses($filters)` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–∞—Ä—Ç
  - `updatePass($passId, $data)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã
  - `deletePass($passId)` - —É–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã
  - `sendPushNotification($passId, $message)` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  - `getTemplates()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

### 2. `/local/php_interface/lib/Level44/Event/OsmiCardHandlers.php`
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (—Ç–µ–ø–µ—Ä—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ `userId` –≤ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞: `serial_number` –≤–º–µ—Å—Ç–æ `cardNumber`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `pass_url`

### 3. `/local/php_interface/lib/Level44/OsmiCard/Settings.php`
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω URL API –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞ `https://api.osmicards.com/v2t`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `template_id`
- ‚úÖ –í `isValid()` –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∞: `template_id` –≤–º–µ—Å—Ç–æ `project_id`

### 4. `/bitrix/admin/osmi_card_settings.php`
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ **"ID —à–∞–±–ª–æ–Ω–∞"** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ **"–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤"**
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω –º–µ—Ç–æ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `getPasses()`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–µ–∫—Ü–∏—è
- ‚úÖ `project_id` —Ç–µ–ø–µ—Ä—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π

### 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
**–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ñ–∞–π–ª:** `/local/php_interface/lib/Level44/OsmiCard/README_UPDATED.md`
- ‚úÖ –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ API
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å—Ç–∞—Ä–æ–π –∏ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ê–¥–º–∏–Ω–∫–∞ ‚Üí **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **OSMI Card**
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - ‚úÖ **API –∫–ª—é—á** (–ø–æ–ª—É—á–∏—Ç–µ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ OSMI Card)
   - ‚úÖ **Template ID** (—Å–º. —à–∞–≥ 2)
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ Template ID

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –∫–ª—é—á —É–∫–∞–∑–∞–Ω
2. –ù–∞–∂–º–∏—Ç–µ **"–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤"**
3. –ò–∑ —Å–ø–∏—Å–∫–∞ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ ID –Ω—É–∂–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
4. –í—Å—Ç–∞–≤—å—Ç–µ –≤ –ø–æ–ª–µ **"ID —à–∞–±–ª–æ–Ω–∞"**
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ù–∞–∂–º–∏—Ç–µ **"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ"**
2. –ï—Å–ª–∏ –≤—Å–µ –û–ö - —É–≤–∏–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `/upload/osmi_card.log`
3. –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å:
   ```
   [2025-10-09 12:34:56] –£—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ –∫–∞—Ä—Ç–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ID: 123, serial_number: 123, URL: https://...
   ```

## üìã –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–∞—Ä—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:

```json
{
  "template_id": "–≤–∞—à_template_id_–∏–∑_–Ω–∞—Å—Ç—Ä–æ–µ–∫",
  "serial_number": "123",
  "barcode": {
    "message": "123",
    "format": "QR"
  },
  "fields": {
    "phone": "79001234567",
    "email": "user@example.com",
    "first_name": "–ò–≤–∞–Ω",
    "last_name": "–ò–≤–∞–Ω–æ–≤",
    "middle_name": "–ò–≤–∞–Ω–æ–≤–∏—á"
  }
}
```

### –í –æ—Ç–≤–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç:

```json
{
  "id": "pass_id_abc123",
  "serial_number": "123",
  "pass_url": "https://api.osmicards.com/passes/...",
  "template_id": "template_id_xyz",
  ...
}
```

### –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ:

- `UF_OSMI_CARD_NUMBER` = `serial_number` (ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- `UF_OSMI_CARD_ID` = `id` (ID –∫–∞—Ä—Ç—ã –≤ OSMI)

## üîß –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ë—ã–ª–æ | –°—Ç–∞–ª–æ |
|----------|------|-------|
| API URL | `https://api.osmicards.com/v1` | `https://api.osmicards.com/v2t` |
| API –∫–ª—é—á | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
| Project ID | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | ‚ö™ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |
| **Template ID** | ‚ùå –ù–µ –±—ã–ª–æ | ‚úÖ **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** |

## üìö –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–ª—É—á–∏—Ç—å serial_number –∫–∞—Ä—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```php
use Level44\Event\OsmiCardHandlers;

$userId = $USER->GetID();
$serialNumber = OsmiCardHandlers::getUserCardNumber($userId);
// –í–µ—Ä–Ω–µ—Ç ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ serial_number
```

### –°–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç—É –≤—Ä—É—á–Ω—É—é:

```php
use Level44\OsmiCard\Api;

$api = new Api();
$result = $api->registerCard([
    'userId' => 123,
    'phone' => '79001234567',
    'email' => 'user@example.com',
    'firstName' => '–ò–≤–∞–Ω',
    'lastName' => '–ò–≤–∞–Ω–æ–≤',
]);

if ($result['success']) {
    echo "Serial number: " . $result['data']['serial_number'];
    echo "Pass ID: " . $result['data']['id'];
    echo "URL –∫–∞—Ä—Ç—ã: " . $result['data']['pass_url'];
}
```

### –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã:

```php
$api = new Api();
$result = $api->updatePass('pass_id_123', [
    'fields' => [
        'balance' => 500,
        'status' => 'gold'
    ]
]);
```

### –û—Ç–ø—Ä–∞–≤–∏—Ç—å push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:

```php
$api = new Api();
$result = $api->sendPushNotification(
    'pass_id_123', 
    '–í–∞–º –Ω–∞—á–∏—Å–ª–µ–Ω–æ 100 –±–æ–Ω—É—Å–æ–≤!'
);
```

### –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤:

```php
$api = new Api();
$result = $api->getTemplates();

if ($result['success']) {
    foreach ($result['data'] as $template) {
        echo "ID: {$template['id']}\n";
        echo "–ù–∞–∑–≤–∞–Ω–∏–µ: {$template['name']}\n";
    }
}
```

## ‚ö° –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ
2. –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `OnAfterUserRegister`
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å `POST /v2t/passes` —Å:
   - `template_id` –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
   - `serial_number` = ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `fields` —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. –í –æ—Ç–≤–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç:
   - `id` - ID –∫–∞—Ä—Ç—ã –≤ OSMI
   - `serial_number` - —Å–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä (= ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
   - `pass_url` - URL –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∫–∞—Ä—Ç—ã
5. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
6. –í—Å–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ `/upload/osmi_card.log`

## üìÑ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `/local/php_interface/lib/Level44/OsmiCard/README_UPDATED.md`
- **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**: https://apidocs.osmicards.com/
- **Postman Collection**: https://www.postman.com/osmicards/

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π —É–±–µ–¥–∏—Ç–µ—Å—å:

- [x] API URL –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ `https://api.osmicards.com/v2t`
- [x] –£–∫–∞–∑–∞–Ω API –∫–ª—é—á
- [x] –£–∫–∞–∑–∞–Ω Template ID (–ø–æ–ª—É—á–µ–Ω —á–µ—Ä–µ–∑ "–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤")
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∞
- [x] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è —Å–æ–∑–¥–∞–Ω—ã
- [x] –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
- [x] –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–∞—Ä—Ç–∞
- [x] –õ–æ–≥ `/upload/osmi_card.log` —Å–æ–¥–µ—Ä–∂–∏—Ç —É—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø–∏—Å–∏

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### "–ù–µ —É–∫–∞–∑–∞–Ω template_id"
**–†–µ—à–µ–Ω–∏–µ:** –£–∫–∞–∂–∏—Ç–µ Template ID –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö. –ü–æ–ª—É—á–∏—Ç–µ –µ–≥–æ –∫–Ω–æ–ø–∫–æ–π "–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤".

### "Invalid API key"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ OSMI Card.

### "Template not found"
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Template ID —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ "–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤".

### –ö–∞—Ä—Ç–∞ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥ `/upload/osmi_card.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–∫

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **–õ–æ–≥ —Ñ–∞–π–ª**: `/upload/osmi_card.log`
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è OSMI**: https://apidocs.osmicards.com/
- **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π README**: `/local/php_interface/lib/Level44/OsmiCard/README_UPDATED.md`

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é  
**–í–µ—Ä—Å–∏—è**: 1.1.0 (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è)  
**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: 2025-10-09

**–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ OSMI Card API!** üéâ

